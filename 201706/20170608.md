# Unity

## ゲームプログラマのための数学

### 座標系

#### Atan2の考え整理
引数に何を渡すかめっちゃ悩む・・・

* 定義はAtan2(float y, float x)
* yの部分には対辺、xの部分には隣辺を渡す

#### Asinの考え方整理

* 定義はAsin(float r)
* rに取りたいのは対辺 / 斜辺という比
* 今回のパターンで対辺, 斜辺に入る値
	* 対辺は原点（ターゲット）に対してカメラをどのくらいの高さに置くかで決まる（y軸方向にどれくらいの高さか？）
	* 斜辺は原点（ターゲット）からカメラをどのくらい離して置くかによって決まる

#### Mathf.Epsilon

* Epsilon自体は非常に微小な浮動小数点数を表している
* マウスやキーボードを用いて移動量のようなごく微量な値まで検知しないといけない場合、動きが無いことの確認に等価演算子を用いた0との比較を行うと、float誤差の切り捨てによって正しく判定できないことがある。
	* 入力値が0で無いことを確認するために、入力値の自乗がEpsilonより大きければ0でないと判定するのが望ましい
	* または、UnityではMathf.Approximately(float a, float b)メソッドでの判定が望ましい

#### transform.LookAt

* 定義はtransform.LookAt(Vector3 targetPosition)
* 引数に取ったポジションに、スクリプトがアタッチされたGameObjectの正面を向ける

### ベクトル

#### 数ベクトル

* 順序付きの数値の組としてのベクトル
* Unityだと、Vector3やVector2が数ベクトルに当たる

#### 幾何ベクトル

* 座標系と関係なく、始点と終点を持つベクトルを幾何ベクトルという
* ベクトルABに平行（同じ向き）かつ同じ大きさのベクトルA'B'を等しいと考えるのが幾何ベクトルの考え方である

#### アフィン空間
* 幾何ベクトルが存在している、座標系や原点のない場所のこと

#### スカラー

* 大きさと向きがある量のことをベクトルとした場合、大きさしか持たない普通の数値をスカラーと呼ぶ。

#### ベクトルの演算法則

スカラーの加算や交換法則、結合法則についていっぱい書いてた  
いちいち書く気起きないｗｗ

#### 単位ベクトル

* 大きさが1のベクトルを単位ベクトルと呼ぶ。
* Unityでは、Vector3.normalizedで単位ベクトルを求めることができる

#### 法線ベクトル

* 2Dの場合にはあるベクトルに垂直なベクトル、3Dの場合にはある平面に垂直なベクトルを法線ベクトルという

#### ベクトルの大きさの比較演算

* 2つのベクトルの大きさを比較する場合、平方根の演算が必要である。コンピュータ上では、平方根の演算は実行コストが高い。
* 2つのベクトルの大きさを比較したいだけの場合、ベクトルの大きさの2乗の数値道士を比較すれば事足りることが多い。Unityでは、Vector3.sqrMagnitudeというプロパティをあらかじめ用意しているので、これを用いた比較演算を行うことが望ましい。

#### Vector3 メモ

* Vector3.MoveTowards(Vector3 pos)
	* posに向けて現在の位置を移動する
* Vector3.RotateTowards(Vector3 pos)
	* posに向けてベクトルを回転させる
	* これ、5月のunity1weekでやった意味がやっと分かった
* Vector3.Project
	* ベクトルの正射影を求めることができる
	* 例えば、物体との衝突（入射と反射のような関係）などで利用される